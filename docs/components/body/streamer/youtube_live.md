# YouTube Live 管理モジュール (youtube_live_adapter.py)

`youtube_live_adapter.py` は、YouTube Data API v3 を使用して配信枠の作成やストリーミングの権限管理を行うモジュールです。

## 主な役割
1. **OAuth 2.0 認証**: Google アカウントでのログインと、アクセストークンの管理・自動更新を行います。
2. **配信枠 (Broadcast) の作成**: 配信のタイトル、説明、予約時間を設定して YouTube 上に配信枠を作成します。
3. **ストリーム設定**: 配信解像度や遅延設定（超低遅延など）を行い、ストリームキーを取得します。

## 設定 (環境変数/パス)
- `YOUTUBE_CLIENT_SECRET_PATH`: Google Cloud Console から取得した OAuth クライアント設定ファイル (`.json`) のパス。
- `YOUTUBE_TOKEN_PATH`: 認証後に生成されるトークン保存用ファイルのパス。

## 主要な仕組み

### OAuth 認証フロー
初めて実行する場合、またはトークンが失効した場合は、以下のフローが発生します：
1. コンソールに認証用 URL が表示されます。
2. ユーザーがブラウザで許可を与え、表示されたコードをコンソールに入力します。
3. 取得したトークンはファイルに保存され、次回以降は自動でリフレッシュされます。

### 配信開始プロセス
`create_live()` 関数は以下の手順を自動的に実行します：
1. `liveBroadcasts.insert`: 配信枠（タイトルや時間）の作成。
2. `liveStreams.insert`: ストリーム設定（RTMP/解像度）の作成。
3. `liveBroadcasts.bind`: 配信枠とストリームを紐付けて、通信を可能にする。

## 注意事項
- YouTube Data API には一日の割り当て制限（クォータ）があります。無駄な配信枠の作成には注意してください。
- 配信の開始には、YouTube 側での電話番号認証済みのチャンネルが必要です。
